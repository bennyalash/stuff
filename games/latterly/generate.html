<!DOCTYPE html>
<html>
<head>
    <title>Word Replacement</title>
</head>
<body>
    <div id="output"></div>

    <script>
        var total = 0;
        
        // Function to check if a word is in the dictionary
        function wordExists(word, dictionary) {
            console.log(word + ": " + dictionary.includes(word));
            return dictionary.includes(word+"\r");
        }
        
        // Function to load the dictionary file and perform the check
        function isValidWord(wordToCheck) {
            // Assuming you have a dictionary file named dictionary.txt
            const dictionaryFilePath = 'words_alpha.txt';
        
            // Create a new XMLHttpRequest object
            const xhr = new XMLHttpRequest();
        
            // Open a new GET request to the dictionary file
            xhr.open('GET', dictionaryFilePath, false); // The third parameter 'false' makes the request synchronous
        
            // Send the request
            xhr.send();
        
            // Check if the request was successful (status code 200)
            if (xhr.status === 200) {
                // Split the content into an array of words (assuming each word is on a separate line)
                const dictionaryContent = xhr.responseText;
                const dictionary = dictionaryContent.split('\n');

                console.log(dictionary);
                // Check if the word exists in the dictionary
                return wordExists(wordToCheck, dictionary);
            } else {
                // If the request fails, return false
                return false;
            }
        }

        // Function to get all valid words that are one letter away from the given word
        function getValidNextWords(word) {
            if(total > 100){
                return;
            }
            const nextWords = [];
            for (let i = 0; i < word.length; i++) {
                for (let j = 97; j <= 122; j++) { // ASCII codes for lowercase letters
                    const newWord = word.substring(0, i) + String.fromCharCode(j) + word.substring(i + 1);
                    if (isValidWord(newWord) && newWord !== word) {
                        nextWords.push(newWord);
                    }
                }
            }
            return nextWords;
        }

        // Function to replace one letter at a time
        function replaceOneLetter(word) {
            if(total > 100){
                return;
            }
            const outputDiv = document.getElementById('output');
            outputDiv.innerText += word + '\n';
            console.log(word);
            total++;
            const nextWords = getValidNextWords(word);
            if (nextWords.length === 0) {
                outputDiv.innerText += "No more valid words.";
                return;
            }
            const randomIndex = Math.floor(Math.random() * nextWords.length);
            const nextWord = nextWords[randomIndex];
            replaceOneLetter(nextWord);
        }

        // Starting word
        const startingWord = "tale";

        // Start replacing letters
        replaceOneLetter(startingWord);
    </script>
</body>
</html>
