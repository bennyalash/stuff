<!DOCTYPE html>
<html>
<head>
    <title>Word Replacement</title>
</head>
<body>
    <div id="output"></div>

    <script>
        var total = 0;
        var dictionary = [];

        // Function to check if a word is in the dictionary
        function wordExists(word) {
            return dictionary.includes(word);
        }

        // Function to load the dictionary file and populate the dictionary array
        function loadDictionary(callback) {
            // Assuming you have a dictionary file named words_alpha.txt
            const dictionaryFilePath = 'words_alpha.txt';

            // Create a new XMLHttpRequest object
            const xhr = new XMLHttpRequest();

            // Open a new GET request to the dictionary file
            xhr.open('GET', dictionaryFilePath, true); // Make the request asynchronous

            // Define what happens on successful data retrieval
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // Split the content into an array of words (assuming each word is on a separate line)
                    const dictionaryContent = xhr.responseText;
                    dictionary = dictionaryContent.split('\n').map(word => word.trim());
                    if (typeof callback === 'function') {
                        callback();
                    }
                } else {
                    console.error('Failed to load the dictionary file.');
                }
            };

            // Send the request
            xhr.send();
        }

        // Function to get all valid words that are one letter away from the given word
        function getValidNextWords(word) {
            const nextWords = [];
            for (let i = 0; i < word.length; i++) {
                for (let j = 97; j <= 122; j++) { // ASCII codes for lowercase letters
                    const newWord = word.substring(0, i) + String.fromCharCode(j) + word.substring(i + 1);
                    if (wordExists(newWord) && newWord !== word) {
                        nextWords.push(newWord);
                    }
                }
            }
            return nextWords;
        }

        // Function to replace one letter at a time
        function replaceOneLetter(startingWord) {
            const outputDiv = document.getElementById('output');
            outputDiv.innerText += startingWord + '\n';
            total++;

            const queue = [startingWord];
            while (queue.length > 0 && total < 10000) {
                const word = queue.shift();
                const nextWords = getValidNextWords(word);
                for (const nextWord of nextWords) {
                    outputDiv.innerText += nextWord + '\n';
                    total++;
                    if (total >= 10000) {
                        outputDiv.innerText += "Reached 10000 words limit.";
                        return;
                    }
                    queue.push(nextWord);
                }
            }

            if (total < 10000) {
                outputDiv.innerText += "No more valid words.";
            }
        }

        // Load the dictionary and start the process
        loadDictionary(replaceOneLetter);
    </script>
</body>
</html>
