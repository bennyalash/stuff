<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fetch Spotify Token</title>
</head>
<body>
  <script>
    // Replace 'your-access-token' with a valid access token obtained using OAuth or another authentication method
    const accessToken = 'BQCpmo7LJcRENmcRVyPGgFn-OOZw5ZCGAXACvWyWEMPjsm2U3a3e4GHO-OrFaeKLPV34ZGOfsDf15yE5ILFLeNO-j0Js6DOY9n2lCu1Nj9Wc88Z6ugA';
    const songName = 'Pluto-Projector';

    const limit = 50; // Number of results to return

    // Function to search for playlists containing a specific song
    function searchPlaylistsContainingSong(songName, accessToken, limit) {
      const searchUrl = `https://api.spotify.com/v1/search?q=${encodeURIComponent(songName)}&type=playlist&limit=${limit}&offset=0&market=US`;

      const requestOptions = {
        method: 'GET',
        headers: {
          'Authorization': `Bearer ${accessToken}`
        }
      };

      return fetch(searchUrl, requestOptions)
        .then(response => response.json())
        .then(data => {
          // Filter playlists where owner is not Spotify
          const filteredPlaylists = data.playlists.items.filter(playlist => playlist.owner.id !== 'spotify');
          return filteredPlaylists;
        })
        .catch(error => {
          console.error('Error:', error);
          return [];
        });
    }

    // Example usage:
    searchPlaylistsContainingSong(songName, accessToken, limit)
      .then(playlists => {
        console.log('Playlists containing the song:');
        playlists.forEach(playlist => {
          console.log(playlist.name);
        });
      });

    /*function fetchSpotifyToken() {
      const clientId = 'e79269b8c74c444598eae4a79f42ff33';
      const clientSecret = '6996b24be1f144debc97d9dd04ca352c';
      const url = 'https://accounts.spotify.com/api/token';

      const data = {
        grant_type: 'client_credentials',
        client_id: clientId,
        client_secret: clientSecret
      };

      const params = new URLSearchParams();
      for (const key in data) {
        params.append(key, data[key]);
      }

      const requestOptions = {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: params
      };

      fetch(url, requestOptions)
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error('Error:', error));
    }

    // Call the function when the page loads
    fetchSpotifyToken();*/
  </script>
</body>
</html>
